"use strict";(self["webpackChunkdev"]=self["webpackChunkdev"]||[]).push([[3627],{4374:function(t,e,s){s.d(e,{A:function(){return c}});var r=function(){var t=this,e=t._self._c;return e("el-tooltip",{attrs:{content:"打开请验单",placement:"bottom-start",effect:"light"}},[e("i",{staticClass:"requestNum",class:{caution:!t.row.requestStateCode},attrs:{blue:"",orange:!t.row.requestStateCode},on:{click:function(e){return t.$emit("open",t.row)}}},[t._v(" "+t._s(Boolean(t.row[t.value])?t.row[t.value]:"???")+" ")])])},a=[],i={name:"QC-requestNum",props:{row:{type:Object,default(){return{}}},value:{type:String,default:""}}},o=i,l=s(1656),n=(0,l.A)(o,r,a,!1,null,"026e88ae",null),c=n.exports},8887:function(t,e,s){s.r(e),s.d(e,{default:function(){return _}});var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"QualityControlReport"},[e("header",{attrs:{flex:"",je:"",ac:""}},[e("field",{directives:[{name:"addon",rawName:"v-addon:suffix",value:t.searchIcon,expression:"searchIcon",arg:"suffix"}],staticClass:"searchBox",attrs:{outlined:"",tile:"",xs:"",placeholder:"精确搜索: 请输入日期、名称或功能查找服务"},on:{enter:t.search,clickSearch:t.search},model:{value:t.stat.search,callback:function(e){t.$set(t.stat,"search",e)},expression:"stat.search"}})],1),e("main",{attrs:{catskill:"",lighten:"",bg:"","sm-pa":"","pa-sm":"",flex:"",js:"",card:"",relative:""}},[e("div",{staticClass:"tagBox",class:{invalid:t.stat.tagInvalid}},t._l(t.tags,(function(s,r){return e("div",{staticClass:"tag",class:{current:t.currentTagIndex===r},on:{click:function(e){t.currentTagIndex=r}}},[e("i",[t._v(t._s(s.name))])])})),0),e("formset",{ref:"formset",attrs:{nocreate:"",noselect:"","lg-pt":"","pt-lg":"","api:subject":"qualityControl/report/product/form","api:primary":"requestGuid","api:query":t.queryString,columns:t.columns,patch:{tabular:{width:"1100px"}}},on:{opened:t.opened,closed:t.closed},scopedSlots:t._u([{key:"form",fn:function(){return[e("transition",{attrs:{name:"fade"}},[t.visible?e("div",[e("div",{attrs:{id:"qualityControl-reportPaper",flex:"",column:"",ac:"","mx-auto":""}},[e("img",{staticClass:"pageBody",attrs:{src:t.pageBody}}),e("img",{staticClass:"pageFooter",attrs:{src:t.pageFooter}}),e("div",{staticClass:"title",attrs:{flex:"",jc:""}},[e("h2",{attrs:{"ls-sm":"","mr-sm":"",xl:""}},[t._v("成品检测报告")]),t._v(" "),e("h2",{attrs:{xl:""}},[t._v("(Certificate of Analysis)")])]),e("div",{staticClass:"reportWrapper",attrs:{"inline-block":""}},[e("img",{staticClass:"pageHeader",attrs:{src:t.pageHeader}}),e("div",{staticClass:"subTitle",attrs:{xs:"",flex:"",jsb:"","mb-xs":"","mt-lg":""}},[e("div",{staticClass:"clientName"},[t._v(" 客户名称: ")]),e("div",{staticClass:"reportNum"},[t._v(" 报告编号：SH - "+t._s(t.form.requestNum+"-"+t.historyLength)+" ")])]),e("table",{staticClass:"reportTable"},[e("tr",[e("td",{staticClass:"info",attrs:{colspan:"2",bold:""}},[e("div",[t._v("产品名称")])]),e("td",[t._v("琼脂")]),e("td",{staticClass:"info",attrs:{bold:""}},[e("div",[t._v("产品代码")])]),e("td",{attrs:{colspan:"2",dev:""}},[t._v("系统带出")])]),e("tr",[e("td",{staticClass:"info",attrs:{colspan:"2",bold:""}},[e("div",[t._v("产品批号")])]),e("td",{attrs:{dev:""}},[t._v("系统带出")]),e("td",{staticClass:"info",attrs:{bold:""}},[e("div",[t._v("生产日期")])]),e("td",{attrs:{colspan:"2",dev:""}},[t._v("系统带出")])]),e("tr",[e("td",{staticClass:"info",attrs:{colspan:"2",bold:""}},[e("div",[t._v("包装规格")])]),e("td",[t._v("25kg/袋")]),e("td",{staticClass:"info",attrs:{bold:""}},[e("div",[t._v("数量")])]),e("td",{attrs:{colspan:"2"}},[e("field",{attrs:{fill:"",noborder:""},model:{value:t.form.reportQuantity,callback:function(e){t.$set(t.form,"reportQuantity",e)},expression:"form.reportQuantity"}},[t._v("请输入数量")])],1)]),e("tr",[e("td",{staticClass:"info",attrs:{colspan:"2",bold:""}},[e("div",[t._v("保质期")])]),e("td",[t._v("12个月")]),e("td",{staticClass:"info",attrs:{bold:""}},[e("div",[t._v("检验日期")])]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.form.reportTime))])]),e("tr",[e("td",{staticClass:"info",attrs:{colspan:"2",bold:""}},[e("div",[t._v("执行标准")])]),e("td",[t._v("GB1886.239-2016")]),e("td",{staticClass:"info",attrs:{bold:""}},[e("div",[t._v("报告日期")])]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.currentTime))])]),e("tr",[e("td",{staticClass:"info",attrs:{bold:"",colspan:"2"}},[e("div",[t._v("检验项目")])]),e("td",{attrs:{bold:""}},[t._v("检测方法")]),e("td",{attrs:{bold:""}},[t._v("标准")]),e("td",{attrs:{bold:""}},[t._v("检测结果")]),e("td",{attrs:{bold:""}},[t._v("判定")])]),t._l(t.感官列表,(function(s,r){return e("reportTable",{attrs:{item:s,index:r,rowspan:t.getRowspan(t.感官列表),groupName:"感官指标"}})})),t._l(t.理化列表,(function(s,r){return e("reportTable",{attrs:{item:s,index:r,rowspan:t.getRowspan(t.理化列表),groupName:"理化指标"}})})),t._l(t.生物列表,(function(s,r){return e("reportTable",{attrs:{item:s,index:r,rowspan:t.getRowspan(t.生物列表),groupName:"微生物 限量指标"}})})),t._l(t.金属列表,(function(s,r){return e("reportTable",{attrs:{item:s,index:r,rowspan:t.getRowspan(t.金属列表),groupName:"重金属 限量指标"}})})),t._l(t.营养成分,(function(s,r){return e("reportTable",{attrs:{item:s,index:r,rowspan:t.getRowspan(t.营养成分),groupName:"营养成分"}})})),t._l(t.其他列表,(function(s,r){return e("reportTable",{attrs:{item:s,index:r,rowspan:t.getRowspan(t.其他列表),groupName:"其他"}})})),e("tr",[e("td",{staticClass:"info fix",attrs:{bold:"","pl-xl":"",colspan:"2"}},[e("div",[t._v("结论")])]),e("td",{attrs:{colspan:"4"}},[t._v(t._s(t.form.conclusion))])]),e("tr",[e("td",{staticClass:"info fix",attrs:{bold:"","pl-xl":"",colspan:"2"}},[e("div",[t._v("检验者")])]),e("td",[t._v(t._s(t.form.inspector))]),e("td",{staticClass:"info fix",attrs:{bold:""}},[e("div",[t._v("审核者")])]),e("td",{attrs:{colspan:"2"}},[t._v(t._s(t.form.verifier))])])],2)])]),e("div",{attrs:{"xl-mt":"","mt-lg":"","pt-xl":"",flex:"",jc:""}},[e("btn",{attrs:{"xl-mr":"","mr-xl":""},on:{click:function(e){return t.form.close()}}},[t._v("关闭")]),e("btn",{attrs:{"xl-ml":"","ml-xl":"",blue:"",bg:"",pending:t.pending,disabled:0===t.form.items.length},on:{click:t.print}},[t._v(" 打印 ")])],1),e("gap",{attrs:{"py-xl":""}})],1):t._e()])]},proxy:!0}])})],1)])},a=[],i=(s(4114),s(4374),s(5730)),o=(s(988),s(8096),s(1253)),l=s(6532),n=s(4560),c=s(1990),u=s(5729),d=s(4353),p=s.n(d),m=s(6219),f={name:"report-product",mixins:[l["default"]],components:{reportTable:o.A},mounted(){this.currentTime=p()().format("YYYY-MM-DD HH:mm")},data(){return{pageHeader:c,pageBody:u,pageFooter:n,form:{requestGuid:0,requestNum:"",sampleNum:"",batchNum:"",inspector:"",verifier:"",conclusion:"",requestTime:"",reportTime:"",reportQuantity:"",items:[],productName:"琼脂",criteria:"GB1886.239-2016",packingSize:"20kg",validity:"1年",reportHistory:[]},pending:!1,columns:[{label:"日期",value:"reportTime",component:m["default"]},{label:"请验单编号",value:"requestNum"},{label:"销售订单编号",value:"orderNum"},{label:"客户编号",value:"clientNum"},{label:"是否出具检测报告",value:"resultStateCode",component:i["default"]}],snapshot:{requestNum:"",sampleNum:"",batchNum:"",inspector:"",verifier:"",conclusion:"",requestTime:"",reportTime:"",reportQuantity:"",productName:"琼脂",criteria:"GB1886.239-2016",packingSize:"20kg",validity:"1年"},currentHistoryIndex:null,currentTime:"",revise:!0}},watch:{items(t,e){if(0===e.length&&t.length>0){this.currentHistoryIndex=null;for(let t in this.snapshot)this.snapshot[t]=this.form[t];this.snapshot.values=[];for(let e of t)this.snapshot.values.push(e.value)}}},provide(){return{revise:this.revise}},computed:{items(){let t=[];for(let e of this.form.items)for(let s of e.list)s.valid&&t.push(s);return t},produceTime:{get(){return this.form.requestTime.split(" ")[0]},set(t){this.form.requestTime=t}},reportTime:{get(){return this.form.updateTime.split(" ")[0]},set(t){this.form.updateTime=t}},historyLength(){return this.form.reportHistory.length}},methods:{selectHistory(t){if(this.currentHistoryIndex===t){this.currentHistoryIndex=null;let t=Object.getOwnPropertyNames(this.form);for(let e in this.snapshot)t.includes(e)&&(this.form[e]=this.snapshot[e]);for(let e=0;e<this.snapshot.values.length;e++)this.items[e].value=this.snapshot.values[e]}else{this.currentHistoryIndex=t;let e=JSON.parse(JSON.stringify(this.form.reportHistory[t]));for(let t in e)this.form[t]=e[t];for(let t=0;t<e.values.length;t++)this.items[t].value=e.values[t]}}}},v=f,h=s(1656),g=(0,h.A)(v,r,a,!1,null,null,null),_=g.exports}}]);