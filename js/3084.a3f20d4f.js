"use strict";(self["webpackChunkdev"]=self["webpackChunkdev"]||[]).push([[3084],{3084:function(t,a,i){i.r(a),i.d(a,{default:function(){return d}});var s=function(){var t=this,a=t._self._c;return a("div",[a("modal",{staticClass:"userManagementFirm",attrs:{nomask:"",persistent:"",noselect:""},on:{close:function(a){return t.$emit("close")}},model:{value:t.stat.firm.valid,callback:function(a){t.$set(t.stat.firm,"valid",a)},expression:"stat.firm.valid"}},[a("div",{staticClass:"firmCard",attrs:{catskill:"",lighten:"",bg:""}},[a("header",{staticClass:"bar",attrs:{flex:"",jsb:"",ac:""}},[a("div",{attrs:{"ls-xl":""}},[t._v("添加公司")]),a("ico",{attrs:{xs:"",pointer:"",bold:""},on:{click:t.closeModal}},[t._v("ui-close")])],1),a("main",[a("div",{attrs:{"px-xl":"","py-xl":"","sm-py":"","nr-md":""}},[a("i",{attrs:{bold:"",black:"","ml-xl":""}},[t._v("公司名称：")]),t._v(" "),a("field",{attrs:{sm:"","col-20":""},model:{value:t.firmName,callback:function(a){t.firmName=a},expression:"firmName"}})],1),a("div",{staticClass:"btnBox",attrs:{flex:"",je:"",ac:"","py-xl":"","sm-py":"","pr-xl":"","sm-pr":""}},[a("div",{attrs:{flex:"","nr-md":""}},[a("btn",{attrs:{flat:"",sm:"",grey:"",bg:"","mr-xl":"",pending:t.stat.firm.pending},on:{click:t.closeModal}},[t._v("取消")]),a("btn",{attrs:{flat:"",sm:"",blue:"",bg:"","mr-md":"",pending:t.stat.firm.pending},on:{click:t.submitFirm}},[t._v("提交")])],1)])])])])],1)},e=[],r={name:"userManagementFirm",inject:["data","stat","snap","api"],data(){return{firmName:""}},watch:{"stat.firm.valid":{handler(t){t||(this.firmName="",this.$emit("post"))}}},methods:{closeModal(){this.stat.firm.pending||(this.stat.firm.valid=!1)},submitFirm(){for(let t=0;t<this.data.tree.companys.length;t++)if(this.data.tree.companys[t].name===this.firmName)return void this.$hint({innerHTML:"已存在同名公司，请修改公司名称",color:"red"});this.stat.firm.pending=!0,this.$http.post(this.api.firm,{name:this.firmName}).then((t=>{1===t.data&&(this.$hint(this.firmName+" 已添加"),this.stat.firm.valid=!1)}))}}},n=r,l=i(1656),m=(0,l.A)(n,s,e,!1,null,"5688ea6c",null),d=m.exports}}]);