(self["webpackChunkdev"]=self["webpackChunkdev"]||[]).push([[9495,4787],{2078:function(t,e,i){"use strict";i.d(e,{A:function(){return o}});var s=function(){var t=this,e=t._self._c;return e("i",{staticClass:"resultState",class:{green:2===t.row.resultStateCode||4===t.row.resultStateCode,blue:1===t.row.resultStateCode,grey:0===t.row.resultStateCode,orange:3===t.row.resultStateCode},attrs:{bevel:""},on:{click:function(e){return t.$emit("open")}}},[t._v(" "+t._s(t.rowValue)+" ")])},r=[],a={name:"qc-resultState",props:{row:{type:Object,default(){return{}}},value:{type:String,default:""}},computed:{rowValue(){return 0===this.row.resultStateCode?"未录入":1===this.row.resultStateCode?"录入中":2===this.row.resultStateCode?"已录入":3===this.row.resultStateCode?"待修改":"已通过"}}},n=a,l=i(1656),u=(0,l.A)(n,s,r,!1,null,"2becf5de",null),o=u.exports},4610:function(t,e,i){"use strict";i.d(e,{A:function(){return m}});var s=function(){var t=this,e=t._self._c;return e("tr",{staticClass:"resultTable",class:{warning:1===t.item.resultCode,caution:t.速溶性结果&&t.item.value<.85,green:t.速溶性结果&&t.item.value>=.85}},[Boolean(t.groupName)?e("td",{staticClass:"groupName",attrs:{rowspan:t.rowspan}},[t._v(t._s(t.groupName))]):t._e(),e("td",{staticClass:"itemName"},[t._v(t._s(t.item.fullName))]),e("td",{staticClass:"value",attrs:{title:t.resultHint}},[e("div",{attrs:{fill:"",relative:""}},[e("div",{directives:[{name:"show",rawName:"v-show",value:"凝胶强度"===t.item.label,expression:"item.label==='凝胶强度'"}],staticClass:"multiInputContainer",attrs:{tabindex:"0"},on:{focus:function(e){t.multiInput=!0},blur:t.closeMultiBox,change:t.handleResult}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.multiInput,expression:"multiInput"}],staticClass:"boilingData",attrs:{fill:"",catskill:"",lighten:"",bg:"",flex:""}},t._l(5,(function(i){return e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.boilingData[i-1],expression:"boilingData[n-1]"}],key:"boilingDataInput-"+i,attrs:{type:"number",disabled:!t.editable&&t.item.submitted},domProps:{value:t.boilingData[i-1]},on:{focus:function(e){t.inputting=!0},blur:t.closeMultiBox,input:function(e){e.target.composing||t.$set(t.boilingData,i-1,e.target.value)}}})])})),0)]),e("div",{directives:[{name:"show",rawName:"v-show",value:"速溶性"===t.item.label,expression:"item.label==='速溶性'"}],staticClass:"multiInputContainer",attrs:{tabindex:"0"},on:{focus:function(e){t.multiInput=!0},blur:t.closeMultiBox}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.multiInput,expression:"multiInput"}],staticClass:"boilingData",attrs:{fill:"",catskill:"",lighten:"",bg:"",flex:""}},t._l(5,(function(i){return e("div",{staticClass:"inputBox"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.thermalData[i-1],expression:"thermalData[n-1]"}],key:"thermalDataInput-"+i,attrs:{type:"number",disabled:!t.editable&&t.item.submitted},domProps:{value:t.thermalData[i-1]},on:{focus:function(e){t.inputting=!0},blur:t.closeMultiBox,change:t.handleResult,input:function(e){e.target.composing||t.$set(t.thermalData,i-1,e.target.value)}}})])})),0)]),e("field",{attrs:{fill:"",tile:"",noborder:"",js:"","sm-pl":"","pl-md":"",invalid:!t.editable&&t.item.submitted},on:{enter:t.handleResult},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})],1)]),e("td",{staticClass:"inspector"},[e("field",{attrs:{fill:"",tile:"",noborder:"",invalid:""},on:{change:t.updateResult,focus:t.forceUpdate},model:{value:t.item.inspector,callback:function(e){t.$set(t.item,"inspector",e)},expression:"item.inspector"}})],1),e("td",{staticClass:"timeLimit",attrs:{"ls-sm":""}},[t._v(t._s(t.item.limit)+"h")]),e("td",{staticClass:"remainingTime"},[e("div",{staticClass:"wrapper",attrs:{fill:""}},[e("i",[t._v(t._s(t.time.remainingTime))])])]),e("td",{staticClass:"issuedDate",class:{null:t.item.date===t.datePlaceholder}},[t._v(t._s(t.item.date))]),e("td",{staticClass:"basis"},["凝胶强度"!==t.item.label?e("div",{attrs:{js:"","md-pl":"","pl-xl":""}},[t._v(" "+t._s(t.item.basis)+" ")]):e("div",{staticClass:"constraint"},[e("field",{staticStyle:{transform:"translateY(0)"},attrs:{select:"",fill:"",xs:"",tile:"",js:"","md-pl":"","pl-lg":"",invalid:t.invalid,items:t.getItems(t.item.defaultBasis)},model:{value:t.item.basis,callback:function(e){t.$set(t.item,"basis",e)},expression:"item.basis"}})],1)]),e("td",{staticClass:"result",class:{null:0===t.item.resultCode}},[t._v(" "+t._s(0===t.item.resultCode?t.datePlaceholder:1===t.item.resultCode?"不合格":"合格")+" ")])])},r=[],a=i(4353),n=i.n(a),l={name:"resultTable",data(){return{timer:null,stamp:0,time:{remainingTime:0,stateCode:0,limit:this.item.limit},multiInput:!1,inputting:!1}},inject:["boilingData","thermalData","datePlaceholder"],props:{item:{type:Object,default(){return{}}},rowspan:{type:Number,default:0},index:{type:Number,default:0},groupName:{type:String,default:""},requestTime:{type:String,default:""},editable:{type:Boolean,default:!1}},watch:{requestTime(t){t&&this.getStamp()}},mounted(){this.getStamp(),this.getRemainingTime(),this.timer=setInterval((()=>{this.item.submitted?clearInterval(this.timer):this.getRemainingTime()}),1e3)},computed:{fulfilled(){return this.item.value&&this.item.inspector},invalid(){return!this.editable&&this.item.submitted},requestDate(){let t=new Date(this.requestTime);return{year:t.getFullYear(),month:t.getMonth(),day:t.getDay(),hour:t.getHours()}},dayLimit(){return parseInt(this.item.limit/8)},hourLimit(){return this.item.limit%8},"速溶性结果"(){return"速溶性"===this.item.label&&2===this.item.resultCode},resultHint(){if(!this.$store.state.devOption.qualityControl.resultHint)return"";let t=this.item.keywords,e="";return e=t?1===t.length?t[0]:t.join(" 或 "):this.item.range,e||(e="暂无标准，录入即可"),"提示： "+e}},methods:{forceUpdate(){this.$forceUpdate()},closeMultiBox(){this.inputting=!1;let t=setTimeout((()=>{this.inputting||(this.multiInput=!1),clearTimeout(t)}),100)},getItems(t){return t.split("/")},getRemainingTime(){let t=this.item.submitted?new Date(this.item.date).getTime():(new Date).getTime(),e=(this.stamp-(t-new Date(this.requestTime)))/1e3;if(e<=0)this.time.remainingTime="00 : 00 : 00";else{let t=parseInt(e/3600).toString(),i=parseInt(e%3600/60).toString(),s=parseInt(e%3600%60).toString();t=t.length<2?"0"+t:t,i=i.length<2?"0"+i:i,s=s.length<2?"0"+s:s,this.time.remainingTime=t+" : "+i+" : "+s}},getStamp(){let t=0,e=this.requestDate.day;for(let s=0;s<this.dayLimit;s++)e<5?(e++,t+=864e5):(e=1,t+=2592e5);let i=this.requestDate.hour;for(let s=0;s<this.hourLimit;s++)i<=20?(i++,t+=36e5):(i=9,t+=468e5);this.stamp=t},handleResult(){Boolean(this.item.value.toString().replace(/\s+/g,""))?this.item.inspector=this.$store.state.user.info.fullName:this.item.inspector="",this.updateResult()},updateResult(){if(this.fulfilled){this.item.date=n()().format("YYYY-MM-DD HH:mm");let t=String(this.item.value).replace(/\s/g,""),e=this.item.range,i=!0;if(e.includes("≥"))this.item.resultCode=Number(t)>=Number(e.replace("≥",""))?2:1;else if(e.includes("＞"))this.item.resultCode=Number(t)>Number(e.replace("＞",""))?2:1;else if(e.includes(">"))this.item.resultCode=Number(t)>Number(e.replace(">",""))?2:1;else if(e.includes("≤"))this.item.resultCode=Number(t)<=Number(e.replace("≤",""))?2:1;else if(e.includes("＜"))this.item.resultCode=Number(t)<Number(e.replace("＜",""))?2:1;else if(e.includes("<"))this.item.resultCode=Number(t)<Number(e.replace("<",""))?2:1;else if(e.includes("-")){let i=e.split("-"),[s,r]=[Number(i[0]),Number(i[1])];t=Number(t),this.item.resultCode=s<=t&&t<=r?2:1}else this.item.keywords?(this.item.resultCode=this.item.keywords.includes(t)?2:1,i=!1):this.item.resultCode=""===e||"—"===e||this.item.range.includes(t)?2:1;if(i&&2===this.item.resultCode){let t=this.item.value;t.includes(".")&&(t=t.split(".")[1]),0===parseInt(t)&&t.includes("00")&&(this.item.resultCode=1)}}else this.item.date=this.datePlaceholder,this.item.resultCode=0;if(this.item.value.includes(".")){let[t,e]=this.item.value.split(".");this.item.value=parseInt(t)+"."+e}else 0!==parseInt(this.item.value)&&(this.item.value=this.item.value.replace(/\b(0+)/gi,""))}},beforeDestroy(){clearInterval(this.timer),this.timer=null}},u=l,o=i(1656),h=(0,o.A)(u,s,r,!1,null,null,null),m=h.exports},9579:function(t,e,i){"use strict";i.d(e,{A:function(){return o}});var s=function(){var t=this,e=t._self._c;return e("el-tooltip",{attrs:{content:"打开检验数据",placement:"bottom-start",effect:"light"}},[e("i",{staticClass:"sampleNum",on:{click:function(e){return t.$emit("open")}}},[t._v(" "+t._s(t.row[t.value])+" ")])])},r=[],a={name:"qc-sampleNum",props:{row:{type:Object,default(){return{}}},value:{type:String,default:""}}},n=a,l=i(1656),u=(0,l.A)(n,s,r,!1,null,"1c97d9b4",null),o=u.exports},1733:function(t,e,i){"use strict";i.d(e,{A:function(){return o}});var s=function(){var t=this,e=t._self._c;return e("ico",{attrs:{grey:"",lighten:"","pr-md":"","sm-pr":"",pointer:""},on:{click:function(e){return t.$parent.$emit("clickSearch")}}},[t._v("search-magnify")])},r=[],a={name:"searchIcon"},n=a,l=i(1656),u=(0,l.A)(n,s,r,!1,null,null,null),o=u.exports},6081:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return o}});var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"qualityControl-result-verifier",class:{auditing:t.auditing},on:{click:function(e){t.auditing&&t.$emit("open")}}},[t._v(" "+t._s(t.rowValue)+" ")])},r=[],a={name:"qualityControl-result-verifier",props:["row","value"],computed:{auditing(){return this.$store.state.user.info.roleIndex>=1&&2===this.row.resultStateCode},rowValue(){return this.auditing?"待审核":this.row[this.value]}}},n=a,l=i(1656),u=(0,l.A)(n,s,r,!1,null,"733a7575",null),o=u.exports},4787:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return c}});var s,r,a=i(4353),n=i.n(a),l=i(1733),u={name:"mixin",mounted(){this.$route.query.requestGuid&&(this.form.requestGuid=this.$route.query.requestGuid,this.$refs.formset.openForm())},data(){return{searchIcon:l.A,stat:{search:""},form:{requestGuid:0,requestNum:"",sampleNum:"",templateGuid:0,batchNum:"",requestTime:"",workflowData:{},inspector:"",conclusion:"",updateTime:"",reportTime:"",resultStateCode:0,items:[{list:[]},{list:[]},{list:[]},{list:[]},{list:[]},{list:[]}]},resultState:["未录入","录入中","已完成"],groupNames:["感官指标","理化指标","微生物 限量指标","重金属 限量指标","营养成分","其他"],datePlaceholder:"-",visible:!1,pending:!1,boilingData:["","","","",""],thermalData:["","","","",""],"凝胶强度":null,"速溶性":null,revise:{conclusion:!0,verifier:!0}}},provide(){return{boilingData:this.boilingData,thermalData:this.thermalData,resultEditable:this.resultEditable,datePlaceholder:this.datePlaceholder}},watch:{boilingData(t){for(let e=0;e<t.length;e++)t[e].length>4&&(t[e]=t[e].slice(0,4)),""!==t[e]&&(t[e]=parseInt(t[e]));if(t.includes(""))this.凝胶强度.value="",this.速溶性.value="";else{let e=0;for(let i of t)e+=i;if(this.凝胶强度.value=Math.ceil(e/5),!this.thermalData.includes("")){let t=0;for(let e of this.thermalData)t+=e;this.速溶性.value=(Math.ceil(t/5)/this.凝胶强度.value).toFixed(2)}}},thermalData(t){for(let e=0;e<t.length;e++)t[e].length>4&&(t[e]=t[e].slice(0,4)),""!==t[e]&&(t[e]=parseInt(t[e]));if(t.includes(""))this.速溶性.value="";else if(this.boilingData.includes(""))this.速溶性.value="";else{let e=0;for(let i of t)e+=i;this.速溶性.value=(Math.ceil(e/5)/this.凝胶强度.value).toFixed(2)}}},computed:{auditing(){return this.$store.state.user.info.roleIndex>=1&&2===this.form.resultStateCode},noSubmit(){return!this.resultEditable&&(0===this.$store.state.user.info.roleIndex?2===this.form.resultStateCode||4===this.form.resultStateCode:2!==this.form.resultStateCode)},resultEditable(){return this.$store.state.devOption.qualityControl.resultEditable||3===this.form.resultStateCode},url(){return{formData:`/qualityControl/form/${this.form.requestGuid}`}},requestTime(){return this.form.requestTime},rowspanItems(){let t=new Array(this.form.items.length).fill(null),e=0;for(let i of this.form.items){for(let s of i.list)if(s.valid){t[e]=s;break}e++}return t}},methods:{search(){console.log("search")},checkConclusionAvailable(){let t=!1;for(let e of this.form.items)for(let i of e.list)if(i.valid&&!i.value&&i.date===this.datePlaceholder){t=!0;break}if(t){this.$hint({innerHTML:"请先提交全部的检验数据",color:"#dd0000"});let t=event.currentTarget.getElementsByTagName("input")[0];this.$nextTick((()=>{t.blur()}))}},initMixin(){this.revise.conclusion=!0,this.revise.verifier=!0},getRowspanFrom(t){let e=0;for(let i of t.list)i.valid&&e++;return e},getGroupName(t,e){return this.rowspanItems.includes(e)?this.groupNames[t]:""},closed(){this.visible=!1,this.initMixin()},checkSubmitted(){for(let t of this.form.items)for(let e of t.list)e.valid&&!e.submitted&&(e.submitted=e.date!==this.datePlaceholder);this.form.conclusion&&(this.revise.conclusion=!1)},opened(){this.$http.get(this.url.formData).then((t=>{let e=t.data;e.workflowData=e.workflowData?JSON.parse(e.workflowData):{};let i=Object.getOwnPropertyNames(this.form);e.items=JSON.parse(e.items);for(let s of e.items)for(let t of s.list)t.value||(t.value=""),t.inspector||(t.inspector=""),t.resultCode||(t.resultCode=0),t.date||(t.date=this.datePlaceholder),"凝胶强度"===t.label&&(this.凝胶强度=t),"速溶性"===t.label&&(this.速溶性=t),t.submitted=!1;for(let s of i)e[s]&&(this.form[s]=e[s]);if(this.checkSubmitted(),this.form.workflowData&&this.form.workflowData.boilingData)for(let s=0;s<this.form.workflowData.boilingData.length;s++)this.boilingData[s]=this.form.workflowData.boilingData[s];else for(let s=0;s<this.boilingData.length;s++)this.boilingData[s]="";if(this.form.workflowData&&this.form.workflowData.thermalData)for(let s=0;s<this.form.workflowData.thermalData.length;s++)this.thermalData[s]=this.form.workflowData.thermalData[s];else for(let s=0;s<this.thermalData.length;s++)this.thermalData[s]="";this.visible=!0}))},reject(){this.pending=!0,this.handleResult(),this.form.resultStateCode=3,delete this.form.verifier,this.form.submit().then((t=>{1!==t&&0!==t?alert("服务器出现问题，请刷新重试"):(this.$hint({innerHTML:"数据审核已驳回",color:"red"}),this.checkSubmitted()),this.pending=!1}))},verified(){this.pending=!0,this.handleResult(),this.form.resultStateCode=4,this.form.verifier=this.$store.state.user.info.fullName,this.form.submit().then((t=>{1!==t&&0!==t?alert("服务器出现问题，请刷新重试"):(this.$hint("已通过审核"),this.checkSubmitted()),this.pending=!1}))},handleResult(){this.form.updateTime=n()().format("YYYY-MM-DD HH:mm");let t=0,e=0,i="";for(let s of this.form.items)for(let r of s.list)if(r.valid){if("凝胶强度"===r.label&&Boolean(r.value)&&r.basis.includes("/"))return this.$hint({innerHTML:"请为 "+r.label+" 选择检测方法",color:"red"}),void(this.pending=!1);t++,r.value&&r.inspector&&(e++,r.locked=!0);let s=r.inspector.trim();i.includes(s)||(""!==i&&(i+=", "),i+=s)}this.form.inspector=i,2!==this.form.resultStateCode&&(this.form.resultStateCode=0===e?0:e<t?1:2),2===this.form.resultStateCode&&""===this.form.reportTime&&(this.form.reportTime=n()().format("YYYY-MM-DD HH:mm")),2===this.form.resultStateCode&&(this.form.conclusion||(this.form.resultStateCode=1)),this.form.workflowData={boilingData:this.boilingData,thermalData:this.thermalData},this.form.workflowData=JSON.stringify(this.form.workflowData)},submit(){this.pending=!0,this.handleResult(),this.form.submit(null,null,!1).then((t=>{1!==t&&0!==t?alert("服务器出现问题，请刷新重试"):(this.$hint("检验数据已提交"),this.checkSubmitted()),this.pending=!1}))}}},o=u,h=i(1656),m=(0,h.A)(o,s,r,!1,null,null,null),c=m.exports},4353:function(t){!function(e,i){t.exports=i()}(0,(function(){"use strict";var t=1e3,e=6e4,i=36e5,s="millisecond",r="second",a="minute",n="hour",l="day",u="week",o="month",h="quarter",m="year",c="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||e[0])+"]"}},g=function(t,e,i){var s=String(t);return!s||s.length>=e?t:""+Array(e+1-s.length).join(i)+t},b={s:g,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),s=Math.floor(i/60),r=i%60;return(e<=0?"+":"-")+g(s,2,"0")+":"+g(r,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var s=12*(i.year()-e.year())+(i.month()-e.month()),r=e.clone().add(s,o),a=i-r<0,n=e.clone().add(s+(a?-1:1),o);return+(-(s+(i-r)/(a?r-n:n-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:o,y:m,w:u,d:l,D:c,h:n,m:a,s:r,ms:s,Q:h}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},w="en",D={};D[w]=v;var $="$isDayjsObject",C=function(t){return t instanceof k||!(!t||!t[$])},S=function t(e,i,s){var r;if(!e)return w;if("string"==typeof e){var a=e.toLowerCase();D[a]&&(r=a),i&&(D[a]=i,r=a);var n=e.split("-");if(!r&&n.length>1)return t(n[0])}else{var l=e.name;D[l]=e,r=l}return!s&&r&&(w=r),r||!s&&w},y=function(t,e){if(C(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new k(i)},M=b;M.l=S,M.i=C,M.w=function(t,e){return y(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var k=function(){function v(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[$]=!0}var g=v.prototype;return g.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var s=e.match(f);if(s){var r=s[2]-1||0,a=(s[7]||"0").substring(0,3);return i?new Date(Date.UTC(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)):new Date(s[1],r,s[3]||1,s[4]||0,s[5]||0,s[6]||0,a)}}return new Date(e)}(t),this.init()},g.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},g.$utils=function(){return M},g.isValid=function(){return!(this.$d.toString()===d)},g.isSame=function(t,e){var i=y(t);return this.startOf(e)<=i&&i<=this.endOf(e)},g.isAfter=function(t,e){return y(t)<this.startOf(e)},g.isBefore=function(t,e){return this.endOf(e)<y(t)},g.$g=function(t,e,i){return M.u(t)?this[e]:this.set(i,t)},g.unix=function(){return Math.floor(this.valueOf()/1e3)},g.valueOf=function(){return this.$d.getTime()},g.startOf=function(t,e){var i=this,s=!!M.u(e)||e,h=M.p(t),d=function(t,e){var r=M.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return s?r:r.endOf(l)},f=function(t,e){return M.w(i.toDate()[t].apply(i.toDate("s"),(s?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},p=this.$W,v=this.$M,g=this.$D,b="set"+(this.$u?"UTC":"");switch(h){case m:return s?d(1,0):d(31,11);case o:return s?d(1,v):d(0,v+1);case u:var w=this.$locale().weekStart||0,D=(p<w?p+7:p)-w;return d(s?g-D:g+(6-D),v);case l:case c:return f(b+"Hours",0);case n:return f(b+"Minutes",1);case a:return f(b+"Seconds",2);case r:return f(b+"Milliseconds",3);default:return this.clone()}},g.endOf=function(t){return this.startOf(t,!1)},g.$set=function(t,e){var i,u=M.p(t),h="set"+(this.$u?"UTC":""),d=(i={},i[l]=h+"Date",i[c]=h+"Date",i[o]=h+"Month",i[m]=h+"FullYear",i[n]=h+"Hours",i[a]=h+"Minutes",i[r]=h+"Seconds",i[s]=h+"Milliseconds",i)[u],f=u===l?this.$D+(e-this.$W):e;if(u===o||u===m){var p=this.clone().set(c,1);p.$d[d](f),p.init(),this.$d=p.set(c,Math.min(this.$D,p.daysInMonth())).$d}else d&&this.$d[d](f);return this.init(),this},g.set=function(t,e){return this.clone().$set(t,e)},g.get=function(t){return this[M.p(t)]()},g.add=function(s,h){var c,d=this;s=Number(s);var f=M.p(h),p=function(t){var e=y(d);return M.w(e.date(e.date()+Math.round(t*s)),d)};if(f===o)return this.set(o,this.$M+s);if(f===m)return this.set(m,this.$y+s);if(f===l)return p(1);if(f===u)return p(7);var v=(c={},c[a]=e,c[n]=i,c[r]=t,c)[f]||1,g=this.$d.getTime()+s*v;return M.w(g,this)},g.subtract=function(t,e){return this.add(-1*t,e)},g.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||d;var s=t||"YYYY-MM-DDTHH:mm:ssZ",r=M.z(this),a=this.$H,n=this.$m,l=this.$M,u=i.weekdays,o=i.months,h=i.meridiem,m=function(t,i,r,a){return t&&(t[i]||t(e,s))||r[i].slice(0,a)},c=function(t){return M.s(a%12||12,t,"0")},f=h||function(t,e,i){var s=t<12?"AM":"PM";return i?s.toLowerCase():s};return s.replace(p,(function(t,s){return s||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return M.s(e.$y,4,"0");case"M":return l+1;case"MM":return M.s(l+1,2,"0");case"MMM":return m(i.monthsShort,l,o,3);case"MMMM":return m(o,l);case"D":return e.$D;case"DD":return M.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return m(i.weekdaysMin,e.$W,u,2);case"ddd":return m(i.weekdaysShort,e.$W,u,3);case"dddd":return u[e.$W];case"H":return String(a);case"HH":return M.s(a,2,"0");case"h":return c(1);case"hh":return c(2);case"a":return f(a,n,!0);case"A":return f(a,n,!1);case"m":return String(n);case"mm":return M.s(n,2,"0");case"s":return String(e.$s);case"ss":return M.s(e.$s,2,"0");case"SSS":return M.s(e.$ms,3,"0");case"Z":return r}return null}(t)||r.replace(":","")}))},g.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},g.diff=function(s,c,d){var f,p=this,v=M.p(c),g=y(s),b=(g.utcOffset()-this.utcOffset())*e,w=this-g,D=function(){return M.m(p,g)};switch(v){case m:f=D()/12;break;case o:f=D();break;case h:f=D()/3;break;case u:f=(w-b)/6048e5;break;case l:f=(w-b)/864e5;break;case n:f=w/i;break;case a:f=w/e;break;case r:f=w/t;break;default:f=w}return d?f:M.a(f)},g.daysInMonth=function(){return this.endOf(o).$D},g.$locale=function(){return D[this.$L]},g.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),s=S(t,e,!0);return s&&(i.$L=s),i},g.clone=function(){return M.w(this.$d,this)},g.toDate=function(){return new Date(this.valueOf())},g.toJSON=function(){return this.isValid()?this.toISOString():null},g.toISOString=function(){return this.$d.toISOString()},g.toString=function(){return this.$d.toUTCString()},v}(),_=k.prototype;return y.prototype=_,[["$ms",s],["$s",r],["$m",a],["$H",n],["$W",l],["$M",o],["$y",m],["$D",c]].forEach((function(t){_[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),y.extend=function(t,e){return t.$i||(t(e,k,y),t.$i=!0),y},y.locale=S,y.isDayjs=C,y.unix=function(t){return y(1e3*t)},y.en=D[w],y.Ls=D,y.p={},y}))}}]);