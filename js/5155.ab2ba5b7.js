(self["webpackChunkdev"]=self["webpackChunkdev"]||[]).push([[5155,988,6532,5729,4560,1990],{8096:function(t,e,r){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",[t._v(t._s(t.value>0?"是":"否"))])},s=[],i={name:"addon-reportCheck",props:["value"]},u=i,a=r(1656),o=(0,a.A)(u,n,s,!1,null,"1c137b6b",null);o.exports},1253:function(t,e,r){"use strict";r.d(e,{A:function(){return l}});var n=function(){var t=this,e=t._self._c;return e("tr",{staticClass:"qualityControl-reportTable",class:{caution:1===t.item.resultCode}},[0===t.index?e("td",{staticClass:"groupName",attrs:{bold:"",rowspan:t.rowspan}},[t._v(" "+t._s(t.groupName)+" ")]):t._e(),e("td",{staticClass:"itemName",attrs:{bold:""}},[t._v(t._s(t.item.fullName))]),e("td",{staticClass:"basis"},[t._v(t._s(t.item.basis))]),e("td",{staticClass:"range",class:{void:!t.item.range}},[t._v(t._s(t.item.range?t.item.range:"—"))]),e("td",{staticClass:"value"},[t.是感官指标?e("div",{attrs:{fill:""}},[t._v(t._s(1===t.item.resultCode?"不符合":"符合"))]):e("div",{attrs:{fill:""}},[t._v(t._s(t.item.value))])]),e("td",{staticClass:"result"},[t._v(" "+t._s(0===t.item.resultCode?"-":1===t.item.resultCode?"不合格":"合格")+" ")])])},s=[],i={name:"qualityControl-reportTable",props:{item:{type:Object,default(){return{}}},rowspan:{type:Number,default:1},index:{type:Number,default:0},groupName:{type:String,default:""}},inject:["revise"],computed:{"是感官指标"(){return["色泽","气味","状态"].includes(this.item.label)}},methods:{check(t){let e=String(t.value).replace(/\s/g,"");if(""===e)return void(t.resultCode=1);let r=t.range;if(r.includes("≥"))this.item.resultCode=Number(e)>=Number(r.replace("≥",""))?2:1;else if(r.includes("＞"))this.item.resultCode=Number(e)>Number(r.replace("＞",""))?2:1;else if(r.includes(">"))this.item.resultCode=Number(e)>Number(r.replace(">",""))?2:1;else if(r.includes("≤"))this.item.resultCode=Number(e)<=Number(r.replace("≤",""))?2:1;else if(r.includes("＜"))this.item.resultCode=Number(e)<Number(r.replace("＜",""))?2:1;else if(r.includes("<"))this.item.resultCode=Number(e)<Number(r.replace("<",""))?2:1;else if(r.includes("-")){let t=r.split("-"),[n,s]=[Number(t[0]),Number(t[1])];e=Number(e),this.item.resultCode=n<=e&&e<=s?2:1}else this.item.keywords?this.item.resultCode=this.item.keywords.includes(e)?2:1:this.item.resultCode=""===r||"—"===r||this.item.range.includes(e)?2:1}}},u=i,a=r(1656),o=(0,a.A)(u,n,s,!1,null,null,null),l=o.exports},1733:function(t,e,r){"use strict";r.d(e,{A:function(){return l}});var n=function(){var t=this,e=t._self._c;return e("ico",{attrs:{grey:"",lighten:"","pr-md":"","sm-pr":"",pointer:""},on:{click:function(e){return t.$parent.$emit("clickSearch")}}},[t._v("search-magnify")])},s=[],i={name:"searchIcon"},u=i,a=r(1656),o=(0,a.A)(u,n,s,!1,null,null,null),l=o.exports},988:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return l}});var n=function(){var t=this,e=t._self._c;return e("div")},s=[],i={name:"copyCounter",prop:["row"]},u=i,a=r(1656),o=(0,a.A)(u,n,s,!1,null,"303d5fc2",null),l=o.exports},5730:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return l}});var n=function(){var t=this,e=t._self._c;return e("el-tooltip",{attrs:{content:"打开检验报告",placement:"bottom-start",effect:"light"}},[e("i",{staticClass:"requestState",attrs:{blue:"",darken:!t.fulfilled},on:{click:function(e){return t.$emit("open")}}},[t._v(" "+t._s(t.fulfilled?"是":"否")+" ")])])},s=[],i={name:"qualityControl-reportState",props:{row:{type:Object,default(){return{}}},value:{type:String,default:""}},computed:{fulfilled(){return 4===this.row[this.value]}}},u=i,a=r(1656),o=(0,a.A)(u,n,s,!1,null,"5642f399",null),l=o.exports},6219:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return l}});var n=function(){var t=this,e=t._self._c;return e("el-tooltip",{attrs:{content:"打开检验报告",placement:"bottom-start",effect:"light"}},[e("i",{staticClass:"requestNum",class:{caution:!t.row.requestStateCode},attrs:{blue:"",orange:!t.row.requestStateCode},on:{click:function(e){return t.$emit("open",t.row)}}},[t._v(" "+t._s(Boolean(t.row[t.value])?t.row[t.value]:"处理中")+" ")])])},s=[],i={name:"QC-requestNum",props:{row:{type:Object,default(){return{}}},value:{type:String,default:""}}},u=i,a=r(1656),o=(0,a.A)(u,n,s,!1,null,"64f97a4e",null),l=o.exports},6532:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return d}});r(4114);var n,s,i=r(4353),u=r.n(i),a=r(1733),o={name:"qualityControl-report-mixins",data(){return{searchIcon:a.A,tags:[{name:"总览",param:""},{name:"已出",param:"resultStateCode=4"},{name:"未出",param:"resultStateCode=!4"}],currentTagIndex:0,stat:{search:"",tagQuery:"",tagInvalid:!1},visible:!1}},watch:{currentTagIndex(t){this.stat.tagQuery=this.tags[t].param}},computed:{url(){return{formData:`/qualityControl/form/${this.form.requestGuid}`}},queryString(){return this.stat.tagQuery},"感官列表"(){let t=[];for(let e of this.form.items[0].list)e.valid&&t.push(e);return t},"理化列表"(){let t=[];for(let e of this.form.items[1].list)e.valid&&t.push(e);return t},"生物列表"(){let t=[];for(let e of this.form.items[2].list)e.valid&&t.push(e);return t},"金属列表"(){let t=[];for(let e of this.form.items[3].list)e.valid&&t.push(e);return t},"营养成分"(){let t=[];for(let e of this.form.items[4].list)e.valid&&t.push(e);return t},"其他列表"(){let t=[];for(let e of this.form.items[5].list)e.valid&&t.push(e);return t}},methods:{search(){console.log("search")},print(){if(this.snapshot){let t=JSON.parse(JSON.stringify(this.snapshot));t.modifications=0;for(let e in t)this.form[e]&&t[e]!==this.form[e]&&(t[e]=this.form[e],"items"!==e&&t.modifications++);for(let e=0;e<this.items.length;e++)this.items[e].value!==this.snapshot.values[e]&&(t.modifications++,t.values[e]=this.items[e].value);t.printTime=u()().format("YYYY-MM-DD HH:mm"),this.form.reportHistory.unshift(t),this.form.reportHistory.length>30&&this.form.reportHistory.pop()}this.pending=!0;let t=this;this.form.submit(null,null,!1).then((e=>{if(1===e){let e=document.getElementById("SHAdmin"),r=document.getElementById("qualityControl-reportPaper").cloneNode(!0);window.onbeforeprint=function(){e.style.display="none",document.body.appendChild(r)},window.onafterprint=function(){document.body.removeChild(r),e.style.display="block",t.pending=!1},window.print()}else this.pending=!1,this.$hint({color:"red",innerHTML:"网络问题导致打印失败，请重试"})}))},getRowspan(t){let e=0;for(let r of t)r.valid&&e++;return e},closed(){this.visible=!1,this.stat.tagInvalid=!1},opened(){this.stat.tagInvalid=!0,this.$http.get(this.url.formData).then((t=>{let e=t.data;e.reportHistory?e.reportHistory=JSON.parse(e.reportHistory):e.reportHistory=[],e.items=JSON.parse(e.items);let r=Object.getOwnPropertyNames(this.form);for(let n of r)e[n]&&(this.form[n]=e[n]);this.visible=!0}))}}},l=o,c=r(1656),f=(0,c.A)(l,n,s,!1,null,null,null),d=f.exports},4353:function(t){!function(e,r){t.exports=r()}(0,(function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",s="second",i="minute",u="hour",a="day",o="week",l="month",c="quarter",f="year",d="date",h="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],r=t%100;return"["+t+(e[(r-20)%10]||e[r]||e[0])+"]"}},$=function(t,e,r){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(r)+t},g={s:$,z:function(t){var e=-t.utcOffset(),r=Math.abs(e),n=Math.floor(r/60),s=r%60;return(e<=0?"+":"-")+$(n,2,"0")+":"+$(s,2,"0")},m:function t(e,r){if(e.date()<r.date())return-t(r,e);var n=12*(r.year()-e.year())+(r.month()-e.month()),s=e.clone().add(n,l),i=r-s<0,u=e.clone().add(n+(i?-1:1),l);return+(-(n+(r-s)/(i?s-u:u-s))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:f,w:o,d:a,D:d,h:u,m:i,s:s,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",b={};b[y]=v;var w="$isDayjsObject",_=function(t){return t instanceof D||!(!t||!t[w])},S=function t(e,r,n){var s;if(!e)return y;if("string"==typeof e){var i=e.toLowerCase();b[i]&&(s=i),r&&(b[i]=r,s=i);var u=e.split("-");if(!s&&u.length>1)return t(u[0])}else{var a=e.name;b[a]=e,s=a}return!n&&s&&(y=s),s||!n&&y},C=function(t,e){if(_(t))return t.clone();var r="object"==typeof e?e:{};return r.date=t,r.args=arguments,new D(r)},M=g;M.l=S,M.i=_,M.w=function(t,e){return C(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var D=function(){function v(t){this.$L=S(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[w]=!0}var $=v.prototype;return $.parse=function(t){this.$d=function(t){var e=t.date,r=t.utc;if(null===e)return new Date(NaN);if(M.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(m);if(n){var s=n[2]-1||0,i=(n[7]||"0").substring(0,3);return r?new Date(Date.UTC(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)):new Date(n[1],s,n[3]||1,n[4]||0,n[5]||0,n[6]||0,i)}}return new Date(e)}(t),this.init()},$.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},$.$utils=function(){return M},$.isValid=function(){return!(this.$d.toString()===h)},$.isSame=function(t,e){var r=C(t);return this.startOf(e)<=r&&r<=this.endOf(e)},$.isAfter=function(t,e){return C(t)<this.startOf(e)},$.isBefore=function(t,e){return this.endOf(e)<C(t)},$.$g=function(t,e,r){return M.u(t)?this[e]:this.set(r,t)},$.unix=function(){return Math.floor(this.valueOf()/1e3)},$.valueOf=function(){return this.$d.getTime()},$.startOf=function(t,e){var r=this,n=!!M.u(e)||e,c=M.p(t),h=function(t,e){var s=M.w(r.$u?Date.UTC(r.$y,e,t):new Date(r.$y,e,t),r);return n?s:s.endOf(a)},m=function(t,e){return M.w(r.toDate()[t].apply(r.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(e)),r)},p=this.$W,v=this.$M,$=this.$D,g="set"+(this.$u?"UTC":"");switch(c){case f:return n?h(1,0):h(31,11);case l:return n?h(1,v):h(0,v+1);case o:var y=this.$locale().weekStart||0,b=(p<y?p+7:p)-y;return h(n?$-b:$+(6-b),v);case a:case d:return m(g+"Hours",0);case u:return m(g+"Minutes",1);case i:return m(g+"Seconds",2);case s:return m(g+"Milliseconds",3);default:return this.clone()}},$.endOf=function(t){return this.startOf(t,!1)},$.$set=function(t,e){var r,o=M.p(t),c="set"+(this.$u?"UTC":""),h=(r={},r[a]=c+"Date",r[d]=c+"Date",r[l]=c+"Month",r[f]=c+"FullYear",r[u]=c+"Hours",r[i]=c+"Minutes",r[s]=c+"Seconds",r[n]=c+"Milliseconds",r)[o],m=o===a?this.$D+(e-this.$W):e;if(o===l||o===f){var p=this.clone().set(d,1);p.$d[h](m),p.init(),this.$d=p.set(d,Math.min(this.$D,p.daysInMonth())).$d}else h&&this.$d[h](m);return this.init(),this},$.set=function(t,e){return this.clone().$set(t,e)},$.get=function(t){return this[M.p(t)]()},$.add=function(n,c){var d,h=this;n=Number(n);var m=M.p(c),p=function(t){var e=C(h);return M.w(e.date(e.date()+Math.round(t*n)),h)};if(m===l)return this.set(l,this.$M+n);if(m===f)return this.set(f,this.$y+n);if(m===a)return p(1);if(m===o)return p(7);var v=(d={},d[i]=e,d[u]=r,d[s]=t,d)[m]||1,$=this.$d.getTime()+n*v;return M.w($,this)},$.subtract=function(t,e){return this.add(-1*t,e)},$.format=function(t){var e=this,r=this.$locale();if(!this.isValid())return r.invalidDate||h;var n=t||"YYYY-MM-DDTHH:mm:ssZ",s=M.z(this),i=this.$H,u=this.$m,a=this.$M,o=r.weekdays,l=r.months,c=r.meridiem,f=function(t,r,s,i){return t&&(t[r]||t(e,n))||s[r].slice(0,i)},d=function(t){return M.s(i%12||12,t,"0")},m=c||function(t,e,r){var n=t<12?"AM":"PM";return r?n.toLowerCase():n};return n.replace(p,(function(t,n){return n||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return M.s(e.$y,4,"0");case"M":return a+1;case"MM":return M.s(a+1,2,"0");case"MMM":return f(r.monthsShort,a,l,3);case"MMMM":return f(l,a);case"D":return e.$D;case"DD":return M.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return f(r.weekdaysMin,e.$W,o,2);case"ddd":return f(r.weekdaysShort,e.$W,o,3);case"dddd":return o[e.$W];case"H":return String(i);case"HH":return M.s(i,2,"0");case"h":return d(1);case"hh":return d(2);case"a":return m(i,u,!0);case"A":return m(i,u,!1);case"m":return String(u);case"mm":return M.s(u,2,"0");case"s":return String(e.$s);case"ss":return M.s(e.$s,2,"0");case"SSS":return M.s(e.$ms,3,"0");case"Z":return s}return null}(t)||s.replace(":","")}))},$.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},$.diff=function(n,d,h){var m,p=this,v=M.p(d),$=C(n),g=($.utcOffset()-this.utcOffset())*e,y=this-$,b=function(){return M.m(p,$)};switch(v){case f:m=b()/12;break;case l:m=b();break;case c:m=b()/3;break;case o:m=(y-g)/6048e5;break;case a:m=(y-g)/864e5;break;case u:m=y/r;break;case i:m=y/e;break;case s:m=y/t;break;default:m=y}return h?m:M.a(m)},$.daysInMonth=function(){return this.endOf(l).$D},$.$locale=function(){return b[this.$L]},$.locale=function(t,e){if(!t)return this.$L;var r=this.clone(),n=S(t,e,!0);return n&&(r.$L=n),r},$.clone=function(){return M.w(this.$d,this)},$.toDate=function(){return new Date(this.valueOf())},$.toJSON=function(){return this.isValid()?this.toISOString():null},$.toISOString=function(){return this.$d.toISOString()},$.toString=function(){return this.$d.toUTCString()},v}(),N=D.prototype;return C.prototype=N,[["$ms",n],["$s",s],["$m",i],["$H",u],["$W",a],["$M",l],["$y",f],["$D",d]].forEach((function(t){N[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),C.extend=function(t,e){return t.$i||(t(e,D,C),t.$i=!0),C},C.locale=S,C.isDayjs=_,C.unix=function(t){return C(1e3*t)},C.en=b[y],C.Ls=b,C.p={},C}))},5729:function(t,e,r){"use strict";t.exports=r.p+"img/pageBody.cc889cbd.jpg"},4560:function(t,e,r){"use strict";t.exports=r.p+"img/pageFooter.d2a4e3c9.jpg"},1990:function(t,e,r){"use strict";t.exports=r.p+"img/pageHeader.f2722a4d.jpg"}}]);