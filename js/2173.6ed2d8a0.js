"use strict";(self["webpackChunkdev"]=self["webpackChunkdev"]||[]).push([[2173],{2173:function(t,e,s){s.r(e),s.d(e,{default:function(){return d}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userManagementTree",attrs:{card:"","inline-block":"",catskill:"",lighten:"",bg:"",noselect:""}},[e("header",{staticClass:"bar"},[t._v("组织架构")]),e("transition",{attrs:{name:"fade"}},[t.data.tree.companys.length>0?e("div",[e("div",{staticClass:"treeBox",attrs:{"pt-xl":""}},t._l(t.data.tree.companys,(function(s,a){return e("div",{staticClass:"companyBox",attrs:{sm:"","mt-lg":""}},[e("div",{staticClass:"name",class:{activated:t.stat.tree.current===s},attrs:{flex:"",ac:"",black:"",lighten:"","px-xl":"","sm-px":"","py-lg":"",draggable:"true"},on:{click:function(e){return t.select(s)}}},[e("ico",{class:{fold:s.folded},attrs:{"mr-xs":""},on:{click:function(t){s.folded=!s.folded}}},[t._v(" "+t._s(s.children.length>0?"ui-triangle":"")+" ")]),e("ico",{attrs:{lg:"","mx-xs":""}},[t._v("util-library")]),e("span",{attrs:{"ls-sm":"",bold:""}},[t._v(t._s(s.name))]),e("i",{directives:[{name:"show",rawName:"v-show",value:t.editable&&t.stat.tree.current===s,expression:"editable && stat.tree.current === company"}],staticClass:"el-icon-edit",attrs:{"wd-xs":"","ht-xs":"",jc:"",ac:"",blue:"",pointer:""},on:{click:function(e){return e.stopPropagation(),t.edit(s)}}})],1),s.folded?t._e():e("div",{staticClass:"deptBox"},t._l(s.children,(function(s,a){return e("div",{staticClass:"dept"},[e("div",{staticClass:"name",class:{activated:t.stat.tree.current===s},attrs:{flex:"",ac:"","py-lg":""},on:{click:function(e){return t.select(s)}}},[e("div",{attrs:{"sm-wd":"","wd-xl":""}}),e("i",{class:{"el-icon-folder":0===s.children.length,"el-icon-folder-add":s.children.length>0&&s.folded,"el-icon-folder-remove":s.children.length>0&&!s.folded},attrs:{"pr-sm":""},on:{click:function(e){return e.stopPropagation(),t.toggle(s)}}}),t._v(" "+t._s(s.name)+" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.editable&&t.stat.tree.current===s,expression:"editable && stat.tree.current === dept"}],staticClass:"el-icon-edit",attrs:{"wd-xs":"","ht-xs":"",jc:"",ac:"",blue:"",pointer:""},on:{click:function(e){return e.stopPropagation(),t.edit(s)}}})]),t._l(s.children,(function(a,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:!s.folded,expression:"!dept.folded"}],staticClass:"subDeptBox"},[e("div",{staticClass:"subDept name",class:{activated:t.stat.tree.current===a},attrs:{flex:"",ac:"",sm:""},on:{click:function(e){return t.select(a)}}},[e("div",{attrs:{"md-wd":"","wd-md":""}}),t._v(" "+t._s(a.name)+" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.editable&&t.stat.tree.current===a,expression:"editable && stat.tree.current === subDept"}],staticClass:"el-icon-edit",attrs:{"wd-xs":"","ht-xs":"",jc:"",ac:"",blue:"",pointer:""},on:{click:function(e){return e.stopPropagation(),t.edit(a)}}})]),t._l(a.children,(function(s,a){return e("div",{staticClass:"group name",class:{activated:t.stat.tree.current===s},attrs:{flex:"",ac:"",sm:""},on:{click:function(e){return t.select(s)}}},[e("div",{attrs:{"md-wd":"","wd-xl":""}}),t._v(" "+t._s(s.name)+" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.editable&&t.stat.tree.current===s,expression:"editable && stat.tree.current === group"}],staticClass:"el-icon-edit",attrs:{"wd-xs":"","ht-xs":"",jc:"",ac:"",blue:"",pointer:""},on:{click:function(e){return e.stopPropagation(),t.edit(s)}}})])}))],2)}))],2)})),0)])})),0),e("div",{staticClass:"funcBox",attrs:{flex:"",jsb:"","px-xl":"","md-px":"","lg-mt":"","mt-xl":""}},[e("div",{staticClass:"btn",attrs:{pointer:"","pl-sm":"",sm:"","wd-15":"",bold:"",bg:"","py-sm":"",jc:""},on:{click:t.insertFirm}},[t._v("＋添加公司")]),e("div",{staticClass:"btn",attrs:{pointer:"","pl-sm":"",sm:"","wd-15":"","wd-md":"",bold:"",bg:"","py-sm":"",jc:""},on:{click:t.insertDept}},[t._v("＋添加部门")]),e("div",{staticClass:"btn",attrs:{pointer:"","pl-sm":"",sm:"","wd-15":"",bold:"",bg:"","py-sm":"",jc:""},on:{click:t.insertCrew}},[t._v("＋添加成员")])])]):t._e()]),e("div",{attrs:{"ht-8":""}})],1)},i=[],r={name:"userManagementTree",inject:["data","stat","snap","api"],props:["getTrees"],created(){this.getTrees()},data(){return{}},computed:{editable(){return this.$store.state.devOption.department.editable}},methods:{select(t){this.stat.tree.current=t},toggle(t){t.folded=!t.folded,this.$nextTick((()=>{this.$forceUpdate()}))},edit(t){this.stat.dept.action="update",this.stat.dept.titleIndex=1,this.stat.dept.valid=!0},insertFirm(){this.stat.firm.valid=!0,console.log(1111)},insertDept(){this.stat.dept.titleIndex=0,this.stat.dept.action="insert",this.stat.dept.valid=!0},insertCrew(){this.stat.user.action="insert",this.stat.list.current=null,this.stat.user.valid=!0}}},n=r,l=s(1656),c=(0,l.A)(n,a,i,!1,null,"6333a511",null),d=c.exports}}]);